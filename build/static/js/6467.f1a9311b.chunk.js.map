{"version":3,"file":"static/js/6467.f1a9311b.chunk.js","mappings":"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","sources":["pages/Login/index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport { makeStyles } from \"@material-ui/core\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport * as yup from \"yup\";\nimport { ErrorMessage, Field, Form, Formik } from \"formik\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport { useTheme } from \"@material-ui/core/styles\";\n// import {logoLogin} from '../../assets/LeafSVG'\nimport logoTix from \"../Register/logo/logoTix.png\";\nimport { login, resetErrorLoginRegister } from \"../../reducers/actions/Auth\";\nimport { LOADING_BACKTO_HOME } from \"../../reducers/constants/Lazy\";\n\nconst useStyles = makeStyles((theme) => ({\n  eye: {\n    position: \"absolute\",\n    top: 32,\n    right: 9,\n    cursor: \"pointer\",\n    color: \"#000\",\n  },\n  logoTix: {\n    width: \"209px\",\n    marginBottom: \"13px\",\n    cursor: \"pointer\",\n    display: \"block\",\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n  },\n  text: {\n    textAlign: \"center\",\n    fontSize:\"3rem\",\n    marginBottom: \"30px\",\n  },\n}));\n\n\nexport default function Login() {\n  const { currentUser, errorLogin } = useSelector((state) => state.authReducer);\n  let location = useLocation();\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const [typePassword, settypePassword] = useState(\"password\");\n  const classes = useStyles();\n  const theme = useTheme();\n  const isDesktop = useMediaQuery(theme.breakpoints.up(\"md\"));\n\n  useEffect(() => {\n    // đăng nhập thành công thì quay về trang trước đó\n    if (currentUser && currentUser?.data?.role !== \"[ROLE_USER]\") {\n      if (location.state === \"/\") {\n        // nếu trang trước đó là \"/\" thì phải hiện loading do trang home mất nhiều thời gian tải\n        dispatch({ type: LOADING_BACKTO_HOME });\n        setTimeout(() => {\n          history.push(\"/\");\n        }, 50);\n        return undefined;\n      }\n      history.push(location.state);\n    }\n  }, [currentUser]);\n  useEffect(() => {\n    return () => {\n      dispatch(resetErrorLoginRegister());\n    };\n  }, []);\n\n  const signinUserSchema = yup.object().shape({\n    usernameOrEmail: yup.string().required(\"*Không được bỏ trống !\"),\n    password: yup.string().required(\"*Không được bỏ trống !\"),\n  });\n\n\n  const handleSubmit = (user) => {\n    // console.log('người dùng nhập user',user);\n    dispatch(login(user));\n  };\n  const handleDangKy = () => {\n    history.push(\"/dangky\", location.state);\n  };\n\n  const handleHold = () => {\n    if (!isDesktop) {\n      return;\n    }\n    settypePassword(\"text\");\n  };\n  const handleRelease = () => {\n    if (!isDesktop) {\n      return;\n    }\n    settypePassword(\"password\");\n  };\n  const handleShowPassword = () => {\n    if (isDesktop) {\n      return;\n    }\n    if (typePassword === \"password\") {\n      settypePassword(\"text\");\n    } else {\n      settypePassword(\"password\");\n    }\n  };\n\n  return (\n    <div className=\"text-light\" style={{ padding: \"60px 32px 30px\" }}>\n      <div className=\"container\">\n        {/* <logoLogin className={classes.logoTix} /> */}\n        <p className={classes.text}>\n          Login!\n        </p>\n      </div>\n      <div>\n        <Formik\n          initialValues={{\n            usernameOrEmail: \"\",\n            password: \"\",\n          }}\n          validationSchema={signinUserSchema}\n          onSubmit={handleSubmit}\n        >\n          {() => (\n            <Form className=\"col-sm-10 mx-auto\">\n              <div className=\"form-group position-relative\">\n                <label>Tên tài khoản hoặc Email&nbsp;</label>\n                <ErrorMessage\n                  name=\"usernameOrEmail\"\n                  render={(msg) => <small className=\"text-danger\">{msg}</small>}\n                />\n                <Field type=\"text\" className=\"form-control\" name=\"usernameOrEmail\" />\n              </div>\n\n              <div className=\"form-group position-relative\">\n                <label>Mật khẩu&nbsp;</label>\n                <ErrorMessage\n                  name=\"password\"\n                  render={(msg) => <small className=\"text-danger\">{msg}</small>}\n                />\n                <Field\n                  type={typePassword}\n                  className=\"form-control\"\n                  name=\"password\"\n                />\n                <div\n                  className={classes.eye}\n                  onMouseDown={handleHold}\n                  onMouseUp={handleRelease}\n                  onClick={handleShowPassword}\n                >\n                  {typePassword === \"password\" ? (\n                    <i\n                      className={isDesktop ? \"fa fa-eye-slash\" : \"fa fa-eye\"}\n                    ></i>\n                  ) : (\n                    <i\n                      className={isDesktop ? \"fa fa-eye\" : \"fa fa-eye-slash\"}\n                    ></i>\n                  )}\n                </div>\n              </div>\n              <p\n                className=\"text-success\"\n                style={{ cursor: \"pointer\" }}\n                onClick={handleDangKy}\n              >\n                * Đăng ký tài khoản\n              </p>\n              <button\n                style={{\n                  backgroundColor: \"#3E63b6\",\n                  borderColor: \"#3E63b6\",\n                  cursor: \"pointer\",\n                }}\n                disable={errorLogin?.toString()}\n                type=\"submit\"\n                className=\"btn btn-success mt-3 container\"\n              >\n                Đăng nhập\n              </button>\n              {/* error from api */}\n              {errorLogin && (\n                <div className=\"alert alert-danger\">\n                  <span> {errorLogin}</span>\n                </div>\n              )}\n            </Form>\n          )}\n        </Formik>\n      </div>\n    </div>\n  );\n}\n"],"names":["useStyles","makeStyles","theme","eye","position","top","right","cursor","color","logoTix","width","marginBottom","display","marginLeft","marginRight","text","textAlign","fontSize","Login","useSelector","state","authReducer","currentUser","errorLogin","location","useLocation","dispatch","useDispatch","history","useHistory","useState","typePassword","settypePassword","classes","useTheme","isDesktop","useMediaQuery","breakpoints","up","useEffect","data","role","type","LOADING_BACKTO_HOME","setTimeout","push","resetErrorLoginRegister","signinUserSchema","yup","shape","usernameOrEmail","required","password","handleDangKy","handleHold","handleRelease","handleShowPassword","className","style","padding","initialValues","validationSchema","onSubmit","user","login","name","render","msg","onMouseDown","onMouseUp","onClick","backgroundColor","borderColor","disable","toString"],"sourceRoot":""}